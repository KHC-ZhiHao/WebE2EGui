(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cfa15"],{6511:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{ref:"inputFile",attrs:{hidden:"",type:"file",accept:".json"},on:{change:e.inputProject}}),a("ui-install",{ref:"install",on:{done:e.installDone}}),a("ui-form",{ref:"createForm",attrs:{title:"建立專案"}},[a("v-text-field",{attrs:{label:"名稱",outlined:"",rules:e.$.alas.rules(["#ms.required"])},model:{value:e.$.createName,callback:function(t){e.$set(e.$,"createName",t)},expression:"$.createName"}})],1),a("ui-app-bar",{attrs:{title:"首頁"}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({staticClass:"mr-2",attrs:{small:"",icon:""},on:{click:e.input}},o),[a("v-icon",[e._v("mdi-location-enter")])],1)]}}])},[a("span",[e._v("引入專案")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{icon:"",small:"",color:e.$.deleteMode?"red":void 0},on:{click:function(t){e.$.deleteMode=!e.$.deleteMode}}},o),[a("v-icon",[e._v("mdi-trash-can-outline")])],1)]}}])},[a("span",[e._v("刪除專案")])])],1),0===e.$.projects.length?a("div",{staticClass:"text-center pt-5 subtitle-1 grey--text"},[a("div",[e._v("😥")]),a("div",[e._v("一個專案也沒有")])]):e._e(),a("v-row",{staticClass:"pa-5 pt-3"},e._l(e.$.projects,(function(t){return a("v-col",{key:t,attrs:{cols:4}},[a("v-card",{attrs:{light:"",to:e.$.deleteMode?void 0:e.target(t)}},[a("v-card-title",[e._v(" "+e._s(t)+" "),a("v-spacer"),e.$.deleteMode?a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.remove(t)}}},[a("v-icon",[e._v("mdi-trash-can-outline")])],1):e._e()],1)],1)],1)})),1),a("v-btn",{attrs:{fab:"",dark:"",fixed:"",right:"",bottom:"",color:"primary"},on:{click:e.create}},[a("v-icon",[e._v("mdi-plus")])],1)],1)},r=[],i=a("9ab4"),n=a("1f61"),l=a("7dda"),c=a("b529"),s=a("a6f4"),u=Object(s["c"])({props:{},setup(){let e=Object(l["b"])(),t=Object(s["g"])(null),a=Object(s["g"])(null),o=Object(s["g"])(null),r=Object(s["f"])({alas:c["b"],projects:[],createName:"",deleteMode:!1});Object(s["d"])(()=>{u()});let u=()=>Object(i["a"])(this,void 0,void 0,(function*(){r.projects=(yield n["e"](e.projectDir)).map(e=>e.replace(".json",""))})),d=()=>{a.value.click()},v=()=>Object(i["a"])(this,void 0,void 0,(function*(){let e=a.value.files[0],o=a.value.value;if(a.value.value="",!o)return null;let i=yield Object(l["e"])(e),n=c["b"].make("project","project").$init(JSON.parse(i));return null==n.name?c["a"].message("error","格式不正確"):r.projects.includes(n.name)?c["a"].message("error","專案已存在"):(yield n.$o.save.start(),t.value.open(n),a.value.value="",void u())})),p=()=>{o.value.open(()=>Object(i["a"])(this,void 0,void 0,(function*(){if(r.projects.includes(r.createName))return c["a"].message("error","專案已存在。");let e=c["b"].make("project","project").$init({name:r.createName});yield e.$o.save.start(),t.value.open(e),u()})))},f=t=>Object(i["a"])(this,void 0,void 0,(function*(){c["a"].confirm("確定刪除專案？",a=>Object(i["a"])(this,void 0,void 0,(function*(){yield n["f"](`${e.projectDir}/${t}.json`),u(),a()})))})),m=e=>({name:"project.overview",params:{project:e}}),b=()=>{t.value.close()};return{$:r,reload:u,input:d,inputProject:v,inputFile:a,create:p,target:m,remove:f,install:t,installDone:b,createForm:o}}}),d=u,v=a("2877"),p=a("6544"),f=a.n(p),m=a("8336"),b=a("b0af"),j=a("99d9"),$=a("62ad"),_=a("132d"),g=a("0fd9"),h=a("2fa4"),k=a("8654"),O=a("3a2f"),y=Object(v["a"])(d,o,r,!1,null,null,null);t["default"]=y.exports;f()(y,{VBtn:m["a"],VCard:b["a"],VCardTitle:j["c"],VCol:$["a"],VIcon:_["a"],VRow:g["a"],VSpacer:h["a"],VTextField:k["a"],VTooltip:O["a"]})}}]);